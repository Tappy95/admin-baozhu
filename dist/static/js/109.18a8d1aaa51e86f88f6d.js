webpackJsonp([109],{"76VJ":function(t,e){},dx5i:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("xT6B"),o=a("iPXC"),i={name:"GameOrder",data:function(){return{styleObject:{width:"200px"},w_input:"200px",powerTrue:!1,optionW:"75px",menuId:"",exa:!1,exportExle:!1,dialogTableVisible:!1,formtwo:{},dialogFormVisible:!1,dialogTableDetail:!1,formLabelWidth:"150px",currentPage:1,pageSize:10,totalCount:0,formInline:{},tableData:[],formtwoInfo:{},selectTime:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},gameList:[],fullscreenLoading:!1,subAmountSum:"",subBonusSum:"",amountSum:"",bonusSum:""}},created:function(){this.menuId=this.$route.query.id,this.queryBtns(),this.accountList(),this.gameData()},filters:{currency:function(t){return t.toFixed(0).replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")}},methods:{indexMethod:function(t){return 1*t+1},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":Object(l.a)(new Date(a),"yyyy-MM-dd hh:mm:sss")},queryBtns:function(){var t=this,e={menuId:this.menuId};this.$fetch("/api/pMenuBtn/queryBtns",e).then(function(e){if((e.statusCode+"").startsWith("2"))for(var a=e.data.length-1;a>=0;a--)"exportExle"==e.data[a].btnCode&&(t.exportExle=!0)})},accountList:function(){var t=this,e={pageNum:this.currentPage,pageSize:this.pageSize,accountId:this.formInline.accountId,lotteryId:this.formInline.lotteryId,actionNo:this.formInline.actionNo,status:this.formInline.status,startTime:this.formInline.startTime,endTime:this.formInline.endTime};this.$fetch("/guess/order/pageList",e).then(function(e){if((e.statusCode+"").startsWith("2")){for(var a=e.data.list.length-1;a>=0;a--)e.data.list[a].odds&&(e.data.list[a].odds=e.data.list[a].odds/1e3),0==e.data.list[a].isOfficial?e.data.list[a].isOfficial="不是":1==e.data.list[a].isOfficial&&(e.data.list[a].isOfficial="是"),"0"==e.data.list[a].status?e.data.list[a].status="撤单":"1"==e.data.list[a].status?e.data.list[a].status="未开奖":"2"==e.data.list[a].status?e.data.list[a].status="开奖中":"3"==e.data.list[a].status?e.data.list[a].status="未中奖":"4"==e.data.list[a].status?e.data.list[a].status="已派奖":"10"==e.data.list[a].status&&(e.data.list[a].status="退款");t.tableData=e.data.list,t.totalCount=e.data.total,t.subAmountSum=e.data.subAmountSum,t.subBonusSum=e.data.subBonusSum,t.amountSum=e.data.amountSum,t.bonusSum=e.data.bonusSum}else t.$message({type:"error",message:e.message,duration:3e3})})},search:function(){this.selectTime&&this.selectTime[0]?this.formInline.startTime=this.selectTime[0].getTime():this.formInline.startTime="",this.selectTime&&this.selectTime[1]?this.formInline.endTime=this.selectTime[1].getTime():this.formInline.endTime="",this.currentPage=1,this.pageSize=10,this.accountList()},getOne:function(t){var e=this;this.dialogTableDetail=!0,this.$fetch("/guess/order/info",{id:t}).then(function(t){(t.statusCode+"").startsWith("2")&&(t.data.kjTime=Object(l.a)(new Date(t.data.kjTime),"yyyy-MM-dd hh:mm:sss"),t.data.actionTime=Object(l.a)(new Date(t.data.actionTime),"yyyy-MM-dd hh:mm:sss"),e.formtwoInfo=t.data)})},gameData:function(){var t=this;this.$fetch("/guess/lottery/page",{}).then(function(e){(e.statusCode+"").startsWith("2")&&(t.gameList=e.data)})},queryExport:function(){this.fullscreenLoading=this.$loading({lock:!0,text:"正在导出...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),this.selectTime&&this.selectTime[0]?this.formInline.startTime=this.selectTime[0].getTime():this.formInline.startTime="",this.selectTime&&this.selectTime[1]?this.formInline.endTime=this.selectTime[1].getTime():this.formInline.endTime="";var t={url:"/excl/orderExcl",accountId:this.formInline.accountId,lotteryId:this.formInline.lotteryId,actionNo:this.formInline.actionNo,status:this.formInline.status,startTime:this.formInline.startTime,endTime:this.formInline.endTime,token:Object(o.d)("token"),channel:Object(o.d)("channelCode"),relation:Object(o.d)("userRelation")};this.doDownload(t)},doDownload:function(t){var e=this,a=t.url,l=t.accountId,o=t.lotteryId,i=t.actionNo,s=t.status,n=t.startTime,r=t.endTime,c=t.token,m=t.channel,f=t.relation,u=document.createElement("a"),d=a;d==a&&l&&(d=d+"?accountId="+l),d==a?n&&(d=d+"?startTime="+n):n&&(d=d+"&startTime="+n),d==a?r&&(d=d+"?endTime="+r):r&&(d=d+"&endTime="+r),d==a?o&&(d=d+"?lotteryId="+o):o&&(d=d+"&lotteryId="+o),d==a?i&&(d=d+"?actionNo="+i):i&&(d=d+"&actionNo="+i),d==a?s&&(d=d+"?status="+s):s&&(d=d+"&status="+s),d=d==a?d+"?token="+c+"&channel="+m+"&relation="+f:d+"&token="+c+"&channel="+m+"&relation="+f,u.setAttribute("href",d),document.querySelector("body").appendChild(u),u.click(),u.remove(),setTimeout(function(){e.fullscreenLoading.close()},5e3)},handleSizeChange:function(t){this.pageSize=t,this.accountList()},handleCurrentChange:function(t){this.currentPage=t,this.accountList()}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"game-order-wrap"},[a("div",{staticClass:"game-order-inner"},[t._m(0),t._v(" "),a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:"用户ID:"}},[a("el-input",{attrs:{placeholder:"请输入用户ID","auto-complete":"off",clearable:""},model:{value:t.formInline.accountId,callback:function(e){t.$set(t.formInline,"accountId",e)},expression:"formInline.accountId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"投注时间:"}},[a("el-date-picker",{attrs:{type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.selectTime,callback:function(e){t.selectTime=e},expression:"selectTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"请选择游戏:"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.formInline.lotteryId,callback:function(e){t.$set(t.formInline,"lotteryId",e)},expression:"formInline.lotteryId"}},[t._l(t.gameList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),t._v(" "),a("el-option",{attrs:{label:"全部",value:""}})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"期号:"}},[a("el-input",{attrs:{placeholder:"请输入期号","auto-complete":"off",clearable:""},model:{value:t.formInline.actionNo,callback:function(e){t.$set(t.formInline,"actionNo",e)},expression:"formInline.actionNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"请选择状态:"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.formInline.status,callback:function(e){t.$set(t.formInline,"status",e)},expression:"formInline.status"}},[a("el-option",{attrs:{label:"撤单",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"未开奖",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"开奖中",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"未中奖",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"已派奖",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"退款",value:"10"}}),t._v(" "),a("el-option",{attrs:{label:"全部",value:""}})],1)],1),t._v(" "),a("el-button",{staticStyle:{"margin-bottom":"30px","margin-left":"10px"},attrs:{type:"primary",plain:""},on:{click:function(e){t.search()}}},[t._v("查询")]),t._v(" "),t.exportExle?a("el-button",{staticStyle:{"margin-bottom":"20px","margin-left":"10px"},attrs:{type:"success",plain:""},on:{click:function(e){t.queryExport()}}},[t._v("导出表格")]):t._e()],1)],1),t._v(" "),a("div",{staticClass:"game-order-table"},[[a("el-table",{staticStyle:{"overflow-y":"auto"},attrs:{data:t.tableData,height:"528"}},[a("el-table-column",{attrs:{fixed:"left",label:"序号",type:"index",index:t.indexMethod,width:"50"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"left","min-width":"150px",prop:"accountId",label:"用户ID"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"uName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{width:"170px",formatter:t.dateFormat,prop:"actionTime",label:"投注时间"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"150px",prop:"lotteryName",label:"游戏名称"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"150px",prop:"actionNo",label:"期号"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"150px",prop:"actionData",label:"竞猜号码"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"150px",label:"竞猜金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"amountgreen"},[t._v("\n                "+t._s(t._f("currency")(e.row.amount))+"\n              ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"150px",label:"中奖金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"amountyellow"},[t._v("\n                "+t._s(t._f("currency")(e.row.bonus))+"\n              ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"status",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:t.optionW},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:function(a){t.getOne(e.row.id)}}},[t._v("详情")])]}}])})],1)],t._v(" "),a("el-dialog",{attrs:{title:"竞猜详情",visible:t.dialogTableDetail,width:"800px"},on:{"update:visible":function(e){t.dialogTableDetail=e}}},[a("el-form",{attrs:{model:t.formtwoInfo}},[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"订单号:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.orderId,callback:function(e){t.$set(t.formtwoInfo,"orderId",e)},expression:"formtwoInfo.orderId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"彩种名称:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.lotteryName,callback:function(e){t.$set(t.formtwoInfo,"lotteryName",e)},expression:"formtwoInfo.lotteryName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"玩法组名称:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.playedGroupName,callback:function(e){t.$set(t.formtwoInfo,"playedGroupName",e)},expression:"formtwoInfo.playedGroupName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"玩法名称:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.playedName,callback:function(e){t.$set(t.formtwoInfo,"playedName",e)},expression:"formtwoInfo.playedName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否官方:","label-width":t.formLabelWidth}},[a("el-select",{style:t.styleObject,attrs:{disabled:!0,"label-width":t.formLabelWidth,placeholder:""},model:{value:t.formtwoInfo.isOfficial,callback:function(e){t.$set(t.formtwoInfo,"isOfficial",e)},expression:"formtwoInfo.isOfficial"}},[a("el-option",{attrs:{label:"是",value:!0}}),t._v(" "),a("el-option",{attrs:{label:"不是",value:!1}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"投注人帐号:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.username,callback:function(e){t.$set(t.formtwoInfo,"username",e)},expression:"formtwoInfo.username"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"投注期号:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.actionNo,callback:function(e){t.$set(t.formtwoInfo,"actionNo",e)},expression:"formtwoInfo.actionNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"投注时间:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.actionTime,callback:function(e){t.$set(t.formtwoInfo,"actionTime",e)},expression:"formtwoInfo.actionTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"投注IP:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.actionIp,callback:function(e){t.$set(t.formtwoInfo,"actionIp",e)},expression:"formtwoInfo.actionIp"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"投注注数:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.actionNum,callback:function(e){t.$set(t.formtwoInfo,"actionNum",e)},expression:"formtwoInfo.actionNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"投注号码:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.actionData,callback:function(e){t.$set(t.formtwoInfo,"actionData",e)},expression:"formtwoInfo.actionData"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"购买金额:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.amount,callback:function(e){t.$set(t.formtwoInfo,"amount",e)},expression:"formtwoInfo.amount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"返点:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.rebate,callback:function(e){t.$set(t.formtwoInfo,"rebate",e)},expression:"formtwoInfo.rebate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"奖金比例:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.odds/1e3,callback:function(e){t.$set(t.formtwoInfo,"odds/1000",e)},expression:"formtwoInfo.odds/1000"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开奖号码:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.lotteryNo,callback:function(e){t.$set(t.formtwoInfo,"lotteryNo",e)},expression:"formtwoInfo.lotteryNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"官方开奖时间:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.kjTime,callback:function(e){t.$set(t.formtwoInfo,"kjTime",e)},expression:"formtwoInfo.kjTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中奖注数:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.winNum,callback:function(e){t.$set(t.formtwoInfo,"winNum",e)},expression:"formtwoInfo.winNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中奖金额*1000:","label-width":t.formLabelWidth}},[a("el-input",{style:t.styleObject,attrs:{disabled:!0,"auto-complete":"off",clearable:""},model:{value:t.formtwoInfo.bonus,callback:function(e){t.$set(t.formtwoInfo,"bonus",e)},expression:"formtwoInfo.bonus"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态:","label-width":t.formLabelWidth}},[a("el-select",{style:t.styleObject,attrs:{disabled:!0,"label-width":t.formLabelWidth,placeholder:""},model:{value:t.formtwoInfo.status,callback:function(e){t.$set(t.formtwoInfo,"status",e)},expression:"formtwoInfo.status"}},[a("el-option",{attrs:{label:"撤单",value:0}}),t._v(" "),a("el-option",{attrs:{label:"未开奖",value:1}}),t._v(" "),a("el-option",{attrs:{label:"开奖中",value:2}}),t._v(" "),a("el-option",{attrs:{label:"未中奖",value:3}}),t._v(" "),a("el-option",{attrs:{label:"已派奖",value:4}}),t._v(" "),a("el-option",{attrs:{label:"退款",value:5}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogTableDetail=!1}}},[t._v("取 消")])],1)],1)],2),t._v(" "),t.tableData.length>0?a("div",{staticClass:"sun_sty"},[a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("p",[t._v("小计"),a("span",[t._v("("+t._s(t.tableData.length)+")：")])])]),t._v(" "),a("div",{staticClass:"item"},[a("p",[t._v(" [ 总游戏竞猜： "+t._s(t._f("currency")(t.subAmountSum))+" ]")]),a("p")]),t._v(" "),a("div",{staticClass:"item"},[a("p",[t._v("[ 总游戏中奖："+t._s(t._f("currency")(t.subBonusSum))+" ]")])])]),t._v(" "),a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("p",[t._v("合计"),a("span",[t._v("("+t._s(t.totalCount)+")：")])])]),t._v(" "),a("div",{staticClass:"item"},[a("p",[t._v(" [ 总游戏竞猜： "+t._s(t._f("currency")(t.amountSum))+" ]")])]),t._v(" "),a("div",{staticClass:"item"},[a("p",[t._v("[ 总游戏中奖："+t._s(t._f("currency")(t.bonusSum))+" ]")]),a("p")])])]):t._e(),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,70],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"game-order-header"},[e("h3",[this._v("财务流水/乐园竞猜明细")]),this._v(" "),e("hr")])}]};var n=a("VU/8")(i,s,!1,function(t){a("76VJ")},null,null);e.default=n.exports}});