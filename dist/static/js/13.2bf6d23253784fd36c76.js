webpackJsonp([13],{"6/Gd":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xT6B"),l={name:"MenuManagement",data:function(){return{dialogTableVisible:!1,formtwo:{},dialogFormVisible:!1,dialogFormVisibleBtn:!1,dialogFormVisibleaddBut:!1,form:{status:"1"},formBut:{},parentsList:[],rules:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入菜单url",trigger:"blur"}],orderId:[{required:!0,message:"请输入排序值",trigger:"blur"},{validator:function(t,e,a){/^[0-9]*$/.test(e)?a():a(new Error("请输入正整数"))},trigger:"blur"}],fileName:[{required:!0,message:"请输入文件名",trigger:"blur"}],parentId:[{required:!0,message:"请选择父级",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],btnName:[{required:!0,message:"请输入按钮名称",trigger:"blur"}],btnCode:[{required:!0,message:"请输入按钮代码",trigger:"blur"}]},formInline:{},formLabelWidth:"120px",currentPage:1,pageSize:10,totalCount:0,tableData:[],currentPage1:1,pageSize1:10,totalCount1:0,tableData1:[],mId:"",isSubmit:!1}},created:function(){this.accountList()},methods:{indexMethod:function(t){return 1*t+1},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":Object(i.a)(new Date(a),"yyyy-MM-dd hh:mm:sss")},butLoad:function(){this.formBut={},this.dialogFormVisibleaddBut=!0,this.isSubmit=!1},addBtnList:function(t){var e=this;this.formBut.menuId=this.mId,this.$refs[t].validate(function(t){t&&(e.$nextTick(function(){this.isSubmit=!0}),e.$post("/api/pMenuBtn/add",e.formBut).then(function(t){(t.statusCode+"").startsWith("2")?(e.dialogFormVisible=!1,e.$message({type:"success",message:"添加成功！"}),e.dialogFormVisibleaddBut=!1,e.butList(0)):(e.$message({type:"error",message:t.message}),e.isSubmit=!1)}))})},butList:function(t){var e=this;this.dialogFormVisibleBtn=!0,0!=t&&(this.mId=t);var a={pageNum:this.currentPage1,pageSize:this.pageSize1,menuId:this.mId};this.$fetch("/api/pMenuBtn/list",a).then(function(t){(t.statusCode+"").startsWith("2")?(e.tableData1=t.data.list,e.totalCount1=t.data.total):e.$message({type:"error",message:t.message,duration:3e3})})},butDelete:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.butDelData(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},butDelData:function(t){var e=this,a={id:t};this.$fetch("/api/pMenuBtn/remove",a).then(function(t){(t.statusCode+"").startsWith("2")?(e.$message({type:"success",message:"删除成功！"}),e.butList(0)):e.$message({type:"error",message:"删除失败！"})})},accountList:function(){var t=this,e={pageNum:this.currentPage,pageSize:this.pageSize,menuName:this.formInline.menuName};this.$fetch("/api/pMenu/list",e).then(function(e){(e.statusCode+"").startsWith("2")?(t.tableData=e.data.list,t.totalCount=e.data.total):t.$message({type:"error",message:e.message,duration:3e3})})},search:function(){this.currentPage=1,this.pageSize=10,this.accountList()},load:function(){this.form={},this.formInline={},this.dialogFormVisible=!0,this.getParents(),this.isSubmit=!1},addBtn:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.$nextTick(function(){this.isSubmit=!0}),e.$post("/api/pMenu/add",e.form).then(function(t){(t.statusCode+"").startsWith("2")?(e.dialogFormVisible=!1,e.$message({type:"success",message:"添加成功！"}),e.accountList()):(e.$message({type:"error",message:t.message}),e.isSubmit=!1)}))})},getParents:function(){var t=this;this.$fetch("/api/pMenu/queryParentMenu").then(function(e){(e.statusCode+"").startsWith("2")&&(t.parentsList=e.data)})},Delete:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.delData(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},delData:function(t){var e=this,a={id:t};this.$fetch("/api/pMenu/remove",a).then(function(t){(t.statusCode+"").startsWith("2")?(e.$message({type:"success",message:"删除成功！"}),e.accountList()):e.$message({type:"error",message:"删除失败！"})})},getInfo:function(t){var e=this;this.dialogTableVisible=!0,this.$fetch("/api/pMenu/queryOne",{id:t}).then(function(t){(t.statusCode+"").startsWith("2")&&(e.formtwo=t.data,e.getParents())})},update:function(t){var e=this;this.$post("/api/pMenu/modify",this.formtwo).then(function(t){(t.statusCode+"").startsWith("2")&&(e.$message({type:"success",message:"修改成功！"}),e.dialogTableVisible=!1,e.accountList())})},handleSizeChange:function(t){this.pageSize=t,this.accountList()},handleCurrentChange:function(t){this.currentPage=t,this.accountList()},handleSizeChange1:function(t){this.pageSize1=t,this.butList(0)},handleCurrentChange1:function(t){this.currentPage1=t,this.butList(0)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-mangement-wrap"},[a("div",{staticClass:"menu-mangement-inner"},[t._m(0),t._v(" "),a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:"菜单名称:"}},[a("el-input",{attrs:{placeholder:"请输入菜单名称",clearable:""},model:{value:t.formInline.menuName,callback:function(e){t.$set(t.formInline,"menuName",e)},expression:"formInline.menuName"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.search()}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.load()}}},[t._v("添加")])],1)],1),t._v(" "),a("div",{staticClass:"menu-mangement-table"},[[a("el-table",{attrs:{data:t.tableData,"max-height":"556"}},[a("el-table-column",{attrs:{fixed:"left",label:"序号",type:"index",index:t.indexMethod,width:"120"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"icon",label:"小图标"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"150px",prop:"menuName",label:"菜单名称"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"170px",prop:"menuUrl",label:"菜单访问地址"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"170px",prop:"fileName",label:"文件名"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"150px",prop:"parentName",label:"父级名称"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"orderId",label:"排序"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",width:"200px",label:"创建时间",formatter:t.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("span",{staticClass:"green"},[t._v("已启用")]):t._e(),t._v(" "),2==e.row.status?a("span",{staticClass:"red"},[t._v("已停用")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"245"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){t.Delete(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:function(a){t.getInfo(e.row.id)}}},[t._v("修改")]),t._v(" "),0!=e.row.parentId?a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(a){t.butList(e.row.id)}}},[t._v("按钮列表")]):t._e()]}}])})],1)],t._v(" "),a("el-dialog",{attrs:{title:"按钮列表",visible:t.dialogFormVisibleBtn,width:"700px"},on:{"update:visible":function(e){t.dialogFormVisibleBtn=e}}},[a("el-button",{staticClass:"but",attrs:{type:"success",plain:""},on:{click:function(e){t.butLoad()}}},[t._v("添加")]),t._v(" "),[a("el-table",{attrs:{data:t.tableData1,"max-height":"556",visible:t.dialogFormVisibleBtn},on:{"update:visible":function(e){t.dialogFormVisibleBtn=e}}},[a("el-table-column",{attrs:{label:"序号",type:"index",index:t.indexMethod,width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"btnName",label:"按钮名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"btnCode",label:"按钮代码"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"78px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(a){t.butDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,50,70],"page-size":t.pageSize1,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount1},on:{"size-change":t.handleSizeChange1,"current-change":t.handleCurrentChange1}})],1)],2),t._v(" "),a("el-dialog",{attrs:{title:"添加菜单",visible:t.dialogFormVisible,width:"700px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"小图标:","label-width":t.formLabelWidth,width:"217px"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单名称:","label-width":t.formLabelWidth,width:"217px",prop:"menuName"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.form.menuName,callback:function(e){t.$set(t.form,"menuName",e)},expression:"form.menuName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单url:","label-width":t.formLabelWidth,width:"217px",prop:"menuUrl"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.form.menuUrl,callback:function(e){t.$set(t.form,"menuUrl",e)},expression:"form.menuUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文件名:","label-width":t.formLabelWidth,width:"217px",prop:"fileName"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.form.fileName,callback:function(e){t.$set(t.form,"fileName",e)},expression:"form.fileName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序:","label-width":t.formLabelWidth,width:"217px",prop:"orderId"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.form.orderId,callback:function(e){t.$set(t.form,"orderId",e)},expression:"form.orderId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"父级:","label-width":t.formLabelWidth,prop:"parentId"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}},t._l(t.parentsList,function(t,e){return a("el-option",{key:e,attrs:{label:t.menuName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth,prop:"status"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{label:"启用",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"停用",value:"2"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.isSubmit},on:{click:function(e){t.addBtn("form")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改菜单",visible:t.dialogTableVisible,width:"700px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{attrs:{model:t.formtwo}},[a("el-form-item",{attrs:{label:"小图标:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.formtwo.icon,callback:function(e){t.$set(t.formtwo,"icon",e)},expression:"formtwo.icon"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单名称:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.formtwo.menuName,callback:function(e){t.$set(t.formtwo,"menuName",e)},expression:"formtwo.menuName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单url:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.formtwo.menuUrl,callback:function(e){t.$set(t.formtwo,"menuUrl",e)},expression:"formtwo.menuUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"文件名:","label-width":t.formLabelWidth,width:"217px",prop:"fileName"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.formtwo.fileName,callback:function(e){t.$set(t.formtwo,"fileName",e)},expression:"formtwo.fileName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序:","label-width":t.formLabelWidth}},[a("el-input",{attrs:{min:"0",type:"number","auto-complete":"off",clearable:""},model:{value:t.formtwo.orderId,callback:function(e){t.$set(t.formtwo,"orderId",e)},expression:"formtwo.orderId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"父级:","label-width":t.formLabelWidth,prop:"parentId"}},[a("el-select",{attrs:{placeholder:""},model:{value:t.formtwo.parentId,callback:function(e){t.$set(t.formtwo,"parentId",e)},expression:"formtwo.parentId"}},t._l(t.parentsList,function(t,e){return a("el-option",{key:e,attrs:{label:t.menuName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"状态:","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},model:{value:t.formtwo.status,callback:function(e){t.$set(t.formtwo,"status",e)},expression:"formtwo.status"}},[a("el-option",{attrs:{label:"启用",value:1}}),t._v(" "),a("el-option",{attrs:{label:"停用",value:2}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.update(t.formtwo)}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加按钮",visible:t.dialogFormVisibleaddBut,width:"600px"},on:{"update:visible":function(e){t.dialogFormVisibleaddBut=e}}},[a("el-form",{ref:"form",attrs:{model:t.formBut,rules:t.rules}},[a("el-form-item",{attrs:{label:"按钮名称:","label-width":t.formLabelWidth,width:"217px",prop:"btnName"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.formBut.btnName,callback:function(e){t.$set(t.formBut,"btnName",e)},expression:"formBut.btnName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"按钮代码:","label-width":t.formLabelWidth,width:"217px",prop:"btnCode"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:t.formBut.btnCode,callback:function(e){t.$set(t.formBut,"btnCode",e)},expression:"formBut.btnCode"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisibleaddBut=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.isSubmit},on:{click:function(e){t.addBtnList("form")}}},[t._v("确 定")])],1)],1)],2),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,70],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menu-mangement-header"},[e("h3",[this._v("系统管理/菜单管理")]),this._v(" "),e("hr")])}]};var r=a("VU/8")(l,o,!1,function(t){a("CWUc")},null,null);e.default=r.exports},CWUc:function(t,e){}});